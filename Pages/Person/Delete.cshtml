@page
@model FilmClient.Pages.Person.DeleteModel
@{
    ViewData["Title"] = "Delete A Person Entry";
}

<h2>@ViewData["Title"]</h2>

<h3>Are you sure you want to delete this person?</h3>
<div>
    <h4>Person to delete</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.PersonToDelete.FirstMidName)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.PersonToDelete.FirstMidName)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.PersonToDelete.LastName)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.PersonToDelete.LastName)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.PersonToDelete.BirthdateString)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.PersonToDelete.BirthdateString)
        </dd>
    </dl>
    @if (Model.RelationCount > 0)
    {
        <hr />
        <h4>The following relations must be removed first</h4>
        <hr />
        <table class="table table-bordered table-condensed table-striped">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.AffectedRelations[0].Title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AffectedRelations[0].Year)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AffectedRelations[0].LastName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AffectedRelations[0].Birthdate)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.AffectedRelations[0].Role)
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.AffectedRelations)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Year)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Birthdate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Role)
                        </td>
                    </tr>
                }    
            </tbody>
        </table>
            
     }

            <form method="post">
                <input type="hidden" asp-for="PersonToDelete.Key" />
                <input type="submit" value="Delete" class="btn btn-default" /> |
                <a asp-page="./Index">Back to list</a>
            </form>
    </div>